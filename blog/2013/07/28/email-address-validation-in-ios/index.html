
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Email Address Validation in iOS - iwantmyreal.name</title>
  <meta name="author" content="Sam Davies">

  
  <meta name="description" content="This post is about GuardPost-ObjectiveC - an objC wrapper around MailGun’s email validation web service. Checkout the
project on GitHub or read on &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://iwantmyreal.name/blog/2013/07/28/email-address-validation-in-ios/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="iwantmyreal.name" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400' rel='stylesheet' type='text/css'>
<link href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34836648-1']);
    _gaq.push(['_trackPageview']);

    setTimeout("_gaq.push(['_trackEvent', '15_seconds', 'read'])", 15000);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <h2>
    <a href="/">
      <img src="http://www.gravatar.com/avatar/ddd6d3bac7772fa67fc5e312a18bdaec?s=150" />
    </a>
  </h2>
  <h1>iwantmyreal.name</h1>

</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li class="icons">
    <a href="https://twitter.com/iwantmyrealname"><i class="icon-twitter"></i></a>
    <a href="https://plus.google.com/101617378418592701939"><i class="icon-google-plus"></i></a>
    <a href="https://app.net/samd"><i class="icon-adn"></i></a>
    <a href="http://stackoverflow.com/users/1127633/sammyd"><i class="icon-stackexchange"></i></a>
    <a href="https://github.com/sammyd"><i class="icon-github"></i></a>
    <a href="https://bitbucket.org/sammyd"><i class="icon-bitbucket"></i></a>
  </li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Email Address Validation in iOS</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-28T14:36:00+01:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:36 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p>This post is about <a href="https://github.com/sammyd/GuardPost-ObjectiveC">GuardPost-ObjectiveC</a>
 - an objC wrapper around MailGun’s email validation web service. Checkout the
project on <a href="https://github.com/sammyd/GuardPost-ObjectiveC">GitHub</a> or read on
for more info…</p>

<hr />

<p>Email address validation can be really hard work. We’ve all spent many hours
attempting to write a reasonable
<a href="http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address/719543#719543">regular expression</a>
to make sure that our users aren’t mis-typing their email address, but regex
doesn’t catch everything.</p>

<p>MailGun <a href="http://blog.mailgun.com/post/free-email-validation-api-for-web-forms/">recently released</a>
a new API called GuardPost, which is used for validating
email addresses - checking not only the parts of the email address, but also that
the domain exists and has a responsive mail exchanger. It also offers suggestions
for common mis-spellings of email addresses - e.g. <code>gmial.com</code> will result in a
suggestion of <code>gmail.com</code>.</p>

<p>This weekend I have built an objC wrapper around the new mailgun GuardPost API,
and I’ll explain how to use it here.</p>

<!-- more -->

<h2 id="guardpost">GuardPost</h2>

<p>GuardPost is part of the web service offered by mailgun, and allows validation
of email addresses. It has a really simple API - details of which can be found
in their <a href="http://documentation.mailgun.com/api-email-validation.html">documentation</a>.
The two methods it offers are as follows:</p>

<ul>
  <li><strong>Validation</strong> This takes a string and attempts to determine whether it is a
valid email address. Not only does it check the construction of the string against
a grammar, but also whether the domain exists and whether it supports a mail
exchanger. Suggestions for common mis-spellings are also offered.</li>
  <li><strong>Parsing</strong> Given a string containing multiple email addresses (comma or
semi-colon delimited) this tool attempts to split them up into valid email addresses
and unparseable string sections.</li>
</ul>

<p>The GuardPost API is free to use, but requires an API key from mailgun. You can
sign up for a free account <a href="https://mailgun.com/signupb?plan=free">here</a>.</p>

<h2 id="guardpost-objectivec">GuardPost-ObjectiveC</h2>

<h3 id="installation">Installation</h3>

<p>GuardPost-ObjectiveC is a friendly wrapper around the mailgun service - based on
<a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a>. It is packaged up
as a CocoaPod so installation is simple:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Podfile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">&#39;5.0&#39;</span>
</span><span class="line">
</span><span class="line"><span class="n">pod</span> <span class="s1">&#39;GuardPost-ObjectiveC&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.1.1&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And then installation (as with every other CocoaPod) is as simple as:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>pod install
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This installs the dependencies as well as GuardPost-ObjectiveC itself.</p>

<h3 id="usage">Usage</h3>

<p>The class which provides the required functionality is <code>GPGuardPost</code>, and it
is provided by the <code>GPGuardPost.h</code> header.</p>

<p>Before attempting to verify an email address you need to specify your mailgun
API key. This is the public API key - with a prefix of <code>pubkey-</code>. To set it use
the <code>setPublicAPIKey:</code> class method. This only has to be done once per application
so it might make sense to do it in the app delegate:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>AppDelegate.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &lt;GPGuardPost.h&gt;</span>
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">AppDelegate</span>
</span><span class="line">
</span><span class="line"><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span> <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">// Register the mailgun API Key</span>
</span><span class="line">    <span class="p">[</span><span class="n">GPGuardPost</span> <span class="nl">setPublicAPIKey</span><span class="p">:</span><span class="s">@&quot;pubkey-from-mailgun&quot;</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Other app launch options here...</span>
</span><span class="line">
</span><span class="line">    <span class="k">return</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="p">...</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now you’re all set to go.</p>

<h4 id="email-address-validation">Email Address Validation</h4>

<p>To verify an email address use the class method
<code>+validateAddress:success:failure:</code>. It takes a string for the address, and 2
blocks - one for success, the other for failure.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="p">[</span><span class="n">GPGuardPost</span> <span class="nl">validateAddress</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">emailField</span><span class="p">.</span><span class="n">text</span>
</span><span class="line">                     <span class="nl">success</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">validity</span><span class="p">,</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">suggestion</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">                        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;API call successful&quot;</span><span class="p">);</span>
</span><span class="line">                     <span class="p">}</span>
</span><span class="line">                     <span class="nl">failure</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">                        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;There was an error: %@&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">error</span> <span class="n">localizedDescription</span><span class="p">]);</span>
</span><span class="line">                     <span class="p">}];</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The success block has 2 arguments:</p>

<ul>
  <li><code>validity</code> is a BOOL which specifies whether the email address sent is valid</li>
  <li><code>suggestion</code> is an NSString which has a suggestion for an email address, or is
<code>nil</code>. Note that valid email addresses can have a non-<code>nil</code> suggestion, and
similarly invalid addresses don’t necessarily have a suggestion.</li>
</ul>

<p>The error block has an <code>NSError</code> argument, which will contain details of the
problem - e.g. a <code>401</code> message in the event of authorization failure.</p>

<h4 id="email-list-parsing">Email List Parsing</h4>

<p>The <code>+parseListOfAddresses:success:failure</code> method mirrors the API call provided
by mailgun. Provided a string which contains a list of addresses the method again
has <code>success</code> and <code>failure</code> callback blocks. The failure block is of the same form
as for email validation.</p>

<p>The success block has 2 <code>NSArray</code> arguments - the first for a list of parsed email
addresses, and the second for unparseable parts of the list string. Note that
these email addresses have only been parsed for grammar, and additional validation
can then be performed with calls to the <code>validateAddress</code> method.</p>

<h2 id="example-app">Example App</h2>

<p>Inside the <code>GuardPost-ObjectiveC</code> repo there is a Samples directory, which contains
an example application. This is a really simple app which verifies an email address
as valid and updates the UI as appropriate.</p>

<p><img class="left" src="/images/2013-07-28-email-validator-app.png" width="290" />
<img class="right" src="/images/2013-07-28-email-validator-app-invalid.png" width="290" /></p>

<p>We create the UI in a storyboard and provide the following outlets and methods
in the header file:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ViewController.h </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="k">@interface</span> <span class="nc">GPViewController</span> : <span class="bp">UIViewController</span> <span class="o">&lt;</span><span class="bp">UITextFieldDelegate</span><span class="o">&gt;</span>
</span><span class="line">
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UITextField</span> <span class="o">*</span><span class="n">emailField</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UILabel</span> <span class="o">*</span><span class="n">lblValid</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UILabel</span> <span class="o">*</span><span class="n">lblDidYouMean</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UIButton</span> <span class="o">*</span><span class="n">btnValidate</span><span class="p">;</span>
</span><span class="line"><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UIActivityIndicatorView</span> <span class="o">*</span><span class="n">actIndicator</span><span class="p">;</span>
</span><span class="line">
</span><span class="line"><span class="p">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">btnValidatePressed:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span><span class="p">;</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The implementation which goes alongside this as follows. It’s refreshingly
simple:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ViewController.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#import &quot;GPViewController.h&quot;</span>
</span><span class="line"><span class="cp">#import &lt;GPGuardPost.h&gt;</span>
</span><span class="line">
</span><span class="line"><span class="k">@implementation</span> <span class="nc">ViewController</span>
</span><span class="line">
</span><span class="line"><span class="p">-</span> <span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nf">btnValidatePressed:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>
</span><span class="line">    <span class="c1">// Bin off the keyboard</span>
</span><span class="line">    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">emailField</span> <span class="n">resignFirstResponder</span><span class="p">];</span>
</span><span class="line">    <span class="c1">// Start the spinner</span>
</span><span class="line">    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">actIndicator</span> <span class="n">startAnimating</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Send the email address off for validation</span>
</span><span class="line">    <span class="p">[</span><span class="n">GPGuardPost</span> <span class="nl">validateAddress</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">emailField</span><span class="p">.</span><span class="n">text</span> <span class="nl">success</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">validity</span><span class="p">,</span> <span class="bp">NSString</span> <span class="o">*</span><span class="n">suggestion</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="c1">// Hide the spinner</span>
</span><span class="line">        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">actIndicator</span> <span class="n">stopAnimating</span><span class="p">];</span>
</span><span class="line">
</span><span class="line">        <span class="c1">// Update the validity label</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">validity</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">@&quot;VALID&quot;</span><span class="p">;</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">greenColor</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">@&quot;INVALID&quot;</span><span class="p">;</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">redColor</span><span class="p">];</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">        <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</span><span class="line">
</span><span class="line">        <span class="c1">// And now check for suggestions:</span>
</span><span class="line">        <span class="k">if</span><span class="p">(</span><span class="n">suggestion</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblDidYouMean</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;Did you mean %@?&quot;</span><span class="p">,</span> <span class="n">suggestion</span><span class="p">];</span>
</span><span class="line">            <span class="nb">self</span><span class="p">.</span><span class="n">lblDidYouMean</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</span><span class="line">        <span class="p">}</span>
</span><span class="line">    <span class="p">}</span> <span class="nl">failure</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">        <span class="c1">// Hide the spinner</span>
</span><span class="line">        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">actIndicator</span> <span class="n">stopAnimating</span><span class="p">];</span>
</span><span class="line">        <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">orangeColor</span><span class="p">];</span>
</span><span class="line">        <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">@&quot;Error&quot;</span><span class="p">;</span>
</span><span class="line">        <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</span><span class="line">        <span class="nb">self</span><span class="p">.</span><span class="n">lblDidYouMean</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="line">        <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;There was an error: %@&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">error</span> <span class="n">localizedDescription</span><span class="p">]);</span>
</span><span class="line">    <span class="p">}];</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>You can see the <code>success</code> and <code>failure</code> blocks clearly. The majority of this code
is getting the right UI elements to appear at the right time with the correct
content. The call to validate the email address is really simple.</p>

<p>To improve the usability we implement the following <code>UITextFieldDelegate</code> method
which will empty the textfield when the keyboard shows, and also hide any previous
result displays:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ViewController.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="objc"><span class="line"><span class="cp">#pragma mark - UITextFieldDelegate methods</span>
</span><span class="line"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">textFieldDidBeginEditing:</span><span class="p">(</span><span class="bp">UITextField</span> <span class="o">*</span><span class="p">)</span><span class="nv">textField</span>
</span><span class="line"><span class="p">{</span>
</span><span class="line">    <span class="c1">// Empty the text field</span>
</span><span class="line">    <span class="nb">self</span><span class="p">.</span><span class="n">emailField</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
</span><span class="line">    <span class="c1">// Hide the result fields</span>
</span><span class="line">    <span class="nb">self</span><span class="p">.</span><span class="n">lblValid</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="line">    <span class="nb">self</span><span class="p">.</span><span class="n">lblDidYouMean</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="conclusion">Conclusion</h2>

<p>Hopefully you might find this useful. I think it’s a great service from mailgun - 
validating email addresses is often a fiddly job, and now it’s a lot simpler.</p>

<p>If you have any suggestions/improvements then send a pull request or raise an
issue on the <a href="https://github.com/sammyd/GuardPost-ObjectiveC">GitHub</a> repo.</p>

<p>If you’ve enjoyed this post then you should follow me on twitter 
<a href="https://twitter.com/iwantmyrealname">@iwantmyrealname</a> or adn 
<a href="https://app.net/samd">@samd</a>.</p>

<p>sam</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Sam Davies</span></span>

      




<time class='entry-date' datetime='2013-07-28T14:36:00+01:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:36 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/api/'>api</a>, <a class='category' href='/blog/categories/cocoapods/'>cocoapods</a>, <a class='category' href='/blog/categories/ios/'>ios</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://iwantmyreal.name/blog/2013/07/28/email-address-validation-in-ios/" data-via="iwantmyrealname" data-counturl="http://iwantmyreal.name/blog/2013/07/28/email-address-validation-in-ios/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/07/13/new-blog-design/" title="Previous Post: New blog design">&laquo; New blog design</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/09/18/the-art-of-custom-ui-controls/" title="Next Post: The Art of Custom UI Controls">The Art of Custom UI Controls &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><ul>
  <li>
    <a href="/atom.xml">RSS</a>
  </li>
  <li>
    <a href="https://twitter.com/iwantmyrealname">twitter</a>
  </li>
  <li>
    <a href="https://app.net/samd">adn</a>
  </li>
  <li>
    <a href="https://plus.google.com/101617378418592701939/posts">g+</a>
  </li>
  <li>
    <a href="https://github.com/sammyd">github</a>
  </li>
  <li>
    Copyright &copy; 2015 - Sam Davies -
    <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  </li>
</ul>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'iwantmyrealname';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://iwantmyreal.name/blog/2013/07/28/email-address-validation-in-ios/';
        var disqus_url = 'http://iwantmyreal.name/blog/2013/07/28/email-address-validation-in-ios/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
